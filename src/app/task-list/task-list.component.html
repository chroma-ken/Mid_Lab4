<div class="card mb-3 shadow-sm">
  <div class="card-body">
    <h5 class="card-title">Task List</h5>

    <app-task-filter></app-task-filter>


    <ul class="list-group">
      <li *ngFor="let task of tasks"
          class="list-group-item d-flex justify-content-between align-items-start flex-column">
        
        <div class="w-100 d-flex justify-content-between align-items-center">
     
          <div>
            <input type="checkbox" class="form-check-input me-2"
                   [checked]="task.completed"
                   (change)="toggleTask(task.id)" />

    
            <span *ngIf="editingTaskId !== task.id"
                  [class.text-decoration-line-through]="task.completed"
                  (click)="startEditing(task)"
                  class="fw-semibold">
              {{ task.title }}
            </span>


            <input *ngIf="editingTaskId === task.id"
                   [(ngModel)]="editedTitle"
                   class="form-control form-control-sm d-inline-block mb-1"
                   style="width: 200px;"
                   (keyup.enter)="saveEdit(task)"
                   (blur)="saveEdit(task)"
                   (keyup.escape)="cancelEdit()" />
          </div>

          <div>
            <span class="badge me-2"
                  [ngClass]="task.completed ? 'bg-success' : 'bg-secondary'">
              {{ task.completed ? 'Done' : 'Pending' }}
            </span>

            <button class="btn btn-sm btn-outline-danger"
                    (click)="deleteTask(task.id)">
              <i class="bi bi-trash"></i> Delete
            </button>
          </div>
        </div>

        <div class="mt-2 w-100">
          <p *ngIf="editingTaskId !== task.id" class="mb-0 text-muted" (click)="startEditing(task)">
            {{ task.description || 'No description provided.' }}
          </p>

          <textarea *ngIf="editingTaskId === task.id"
                    [(ngModel)]="editedDescription"
                    rows="2"
                    class="form-control form-control-sm mt-1"
                    placeholder="Edit description..."
                    (keyup.enter)="saveEdit(task)"
                    (blur)="saveEdit(task)"
                    (keyup.escape)="cancelEdit()">
          </textarea>
        </div>

      </li>
    </ul>

    <p *ngIf="tasks.length === 0" class="text-muted mt-2">No tasks yet.</p>
  </div>
</div>
